(window.webpackJsonp=window.webpackJsonp||[]).push([[2,7],{120:function(e,t,a){"use strict";a.r(t);var l=a(1),s=a.n(l),o=a(20),n=a(56);t.default=function(){return s.a.createElement(n.a,{title:"Page Not Found"}," ",s.a.createElement("div",{className:"mb-3 text-center"},s.a.createElement("i",{className:"icon far fa-frown fa-9x"})),s.a.createElement("div",{className:"text-center"},s.a.createElement("h2",null,s.a.createElement("b",null,"Whoops!! Page not found")),s.a.createElement("p",{className:"lead text-muted"}," ","No worries, you can always visit the ",s.a.createElement(o.b,{to:"/"},"homepage")," to get a fresh start. You can do this by clicking the complexapp logo on the top left of your screen or by clicking ",s.a.createElement(o.b,{to:"/"},"here"))))}},220:function(e,t,a){"use strict";a.r(t);var l=a(18),s=a.n(l),o=a(1),n=a.n(o),r=a(7),c=a(20),u=a(44),i=a(112),d=a(33),m=a(25),b=a(56),v=a(57),p=a(120);t.default=Object(r.g)((function(e){const t=Object(o.useContext)(d.a),a=Object(o.useContext)(m.a),l={title:{value:"",hasErrors:!1,errorMessage:""},body:{value:"",hasErrors:!1,errorMessage:""},fetchingData:!0,isSaving:!1,id:Object(r.f)().id,sendCount:0,EditButtonText:"Save Edit",pageNotFound:!1},[g,y]=Object(u.a)((function(e,t){switch(t.type){case"fetchComplete":e.title.value=t.value.title,e.body.value=t.value.body,e.fetchingData=!1;break;case"titleChange":e.title.hasErrors=!1,e.title.value=t.value,e.title.errorMessage="";break;case"bodyChange":e.body.hasErrors=!1,e.body.value=t.value,e.body.errorMessage="";break;case"submitRequest":e.title.hasErrors||e.body.hasErrors||(e.sendCount++,e.EditButtonText="Saving...");break;case"saveResquestStarted":e.isSaving=!0;break;case"saveRequestFinished":e.isSaving=!1,e.EditButtonText="Save Edit";break;case"bodyRules":t.value.trim()||(e.body.hasErrors=!0,e.body.errorMessage="Post must contain a body");break;case"titleRules":t.value.trim()||(e.title.hasErrors=!0,e.title.errorMessage="Title field cannot be empty");break;case"pageNotFound":e.pageNotFound=!0;break;default:return e}}),l);return Object(o.useEffect)(()=>{const l=s.a.CancelToken.source();return async function(){try{const o=await s.a.get("/post/"+g.id,{cancelToken:l.token});o.data?(y({type:"fetchComplete",value:o.data}),t.user.username!=o.data.author.username&&(a({type:"flashMessage",value:["alert-warning","Sorry, You do not have permission to edit this post"]}),e.history.push("/posts/"+g.id))):y({type:"pageNotFound"})}catch(e){console.log("[Error] Post cannot be displayed or the request was cancelled")}}(),()=>{l.cancel()}},[]),Object(o.useEffect)(()=>{if(g.sendCount){y({type:"saveRequestStarted"});const e=s.a.CancelToken.source();return async function(){try{await s.a.post(`/post/${g.id}/edit`,{title:g.title.value,body:g.body.value,token:t.user.token},{cancelToken:e.token}),y({type:"saveRequestFinished"}),a({type:"flashMessage",value:["alert-success","Update Successful!"]})}catch(e){console.log("[Error] Post could not be sent or the request was cancelled"),a({type:"flashMessage",value:["alert-danger","Update Failed!"]})}}(),()=>{e.cancel()}}},[g.sendCount]),g.pageNotFound?n.a.createElement(p.default,null):g.fetchingData?n.a.createElement(b.a,{title:"Post"}," ",n.a.createElement(v.a,null)):n.a.createElement(b.a,{title:"Edit post"},n.a.createElement(c.b,{className:"small font-weight-bold",to:"/posts/"+g.id}," ",n.a.createElement("i",{className:"fas fa-angle-double-left"})," Back to Post"),n.a.createElement("form",{className:"mt-3",onSubmit:function(e){e.preventDefault(),y({type:"titleRules",value:g.title.value}),y({type:"bodyRules",value:g.body.value}),y({type:"submitRequest"})}},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"post-title",className:"text-muted mb-1"},n.a.createElement("small",null,"Title")),n.a.createElement("input",{onBlur:e=>y({type:"titleRules",value:e.target.value}),onChange:e=>y({type:"titleChange",value:e.target.value}),autoFocus:!0,value:g.title.value,name:"title",id:"post-title",className:"form-control form-control-lg form-control-title",type:"text",placeholder:"",autoComplete:"off"}),n.a.createElement(i.a,{in:g.title.hasErrors,timeout:330,classNames:"liveValidateMessage",unmountOnExit:!0},n.a.createElement("div",{className:"alert alert-danger small liveValidateMessage"}," ",g.title.errorMessage))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"post-body",className:"text-muted mb-1 d-block"},n.a.createElement("small",null,"Body Content")),n.a.createElement("textarea",{onBlur:e=>y({type:"bodyRules",value:e.target.value}),onChange:e=>y({type:"bodyChange",value:e.target.value}),value:g.body.value,name:"body",id:"post-body",className:"body-content tall-textarea form-control",type:"text"}),n.a.createElement(i.a,{in:g.body.hasErrors,timeout:330,unmountOnExit:!0,classNames:"liveValidateMessage"},n.a.createElement("div",{className:"alert alert-danger small liveValidateMessage"}," ",g.body.errorMessage))),n.a.createElement("button",{className:"btn btn-outline-secondary",disabled:g.isSaving},g.EditButtonText)))}))}}]);