(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{225:function(e,t,a){"use strict";a.r(t);var n=a(18),o=a.n(n),l=a(1),s=a.n(l),r=a(7),c=a(20),u=a(56),i=a(33),m=a(57);var f=function(){const{username:e}=Object(r.f)(),[t,a]=Object(l.useState)(!0),[n,u]=Object(l.useState)([]);return Object(l.useEffect)(()=>{const t=o.a.CancelToken.source();return async function(){try{const n=await o.a.get(`/profile/${e}/posts`,{cancelToken:t.token});u(n.data),a(!1)}catch(e){a(!0),console.log("[Error] Couldn't load posts or the request was cancelled")}}(),()=>{t.cancel()}},[]),t?s.a.createElement(m.a,null):s.a.createElement("div",{className:"list-group"},n.map(e=>{const t=new Date(e.createdDate),a=`${t.getMonth()+1}/${t.getDate()}/${t.getFullYear()}`;return s.a.createElement(c.b,{key:e._id,to:"/posts/"+e._id,className:"list-group-item list-group-item-action"},s.a.createElement("img",{className:"avatar-tiny",src:e.author.avatar,alt:"avatar of creator of post #1"})," ",s.a.createElement("strong",null,e.title),s.a.createElement("span",{className:"text-muted small"}," on ",a))}))};t.default=function(){const e=Object(l.useContext)(i.a),{username:t}=Object(r.f)(),[a,n]=Object(l.useState)({profileUsername:"...",profileAvatar:e.user.avatar,isfollowing:!1,counts:{postCount:"",followingCount:"",followerCount:""}});return Object(l.useEffect)(()=>{const a=o.a.CancelToken.source();return async function(){try{const l=await o.a.post("/profile/"+t,{token:e.user.token,CancelToken:a.token});n(l.data)}catch(e){console.log("[Error] Could not fetch data or user left the page before load was completed")}}(),()=>{a.cancel()}},[]),s.a.createElement(u.a,{title:"Your Profile"},s.a.createElement("h2",null,s.a.createElement("img",{className:"avatar-small",src:a.profileAvatar,alt:"Your Avatar"})," ",a.profileUsername,s.a.createElement("button",{className:"btn btn-outline-primary btn-sm ml-2"},"Follow ",s.a.createElement("i",{className:"fas fa-user-plus"}))),s.a.createElement("div",{className:"profile-nav nav nav-tabs pt-2 mb-4"},s.a.createElement(c.b,{to:"#",className:"active nav-item nav-link"},"Posts: ",a.counts.postCount),s.a.createElement(c.b,{to:"#",className:"nav-item nav-link"},"Followers: ",a.counts.followerCount),s.a.createElement(c.b,{to:"#",className:"nav-item nav-link"},"Following: ",a.counts.followingCount)),s.a.createElement(f,null))}}}]);